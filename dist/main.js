(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var s=n.getElementsByTagName("script");s.length&&(e=s[s.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.p;const e={type:"text",name:"name",class:"task-form-input task-name",placeholder:"Task Name"},n={type:"text",onfocus:"(this.type='date')",onblur:"(this.type='text')",name:"due",class:"task-form-input task-due",placeholder:"Due Date"},s={type:"text",name:"description",class:"task-form-input task-description",placeholder:"Task Description"},i={type:"text",name:"priority",class:"task-form-input task-priority",placeholder:"Task Priority"},r={type:"submit",class:"task-form-submit button",value:"Create Task"},a={type:"submit",class:"task-form-cancel button",value:"Cancel"};class o{constructor(t,e){this.name=t.name,this.due=t.due,this.description=t.description,this.priority=t.priority,this.id=e,this.completed=!1}}class c{constructor(t){this.name=t,this.tasks=[],this.id=c.assignId()}addTask(t){let e=this.tasks.length+1,n=new o(t,e);this.tasks.push(n)}removeTask(t){let e=this.tasks.indexOf(this.findTaskInProject(t));this.tasks.splice(e,1)}updateTaskStatus(t,e){this.findTaskInProject(t).completed=e}findTaskInProject(t){return this.tasks.find((e=>e.id==t))}static assignId(){return d++}}let l=[],d=1;function u(t,e){let n=p(f(t)),s=m(t);n.updateTaskStatus(s,e)}function p(t){return l.find((e=>e.id==t.getAttribute("data-id")))}function f(t){return t.closest(".project")}function m(t){return t.getAttribute("data-id")}const h={divClass:"add-new-task",buttonClass:"new-task-button",buttonText:"+ add task"},k={divClass:"delete-project",buttonClass:"delete-project-button",buttonText:"- remove project"},v={divClass:"details-complete",buttonText:"Mark as finished"},b={divClass:"details-delete",buttonText:"Delete task"};function T(t,e){let n=D("div",t.divClass),s=D("div",t.buttonClass);return s.innerText=t.buttonText,s.addEventListener("click",(()=>{e(s.closest(".project"))})),n.append(s),n}function j(t){confirm("Really delete?")&&(document.querySelector(".projects-list").removeChild(t),function(t){let e=p(t),n=l.indexOf(e);l.splice(n,1),console.log(l)}(t))}function g(t,e){let n=D("li",t.divClass);return n.classList.add("button"),n.innerText=t.buttonText,e(n),n}function y(t){t.addEventListener("click",x)}function x(){let t=this.closest(".project-task");if(t.classList.toggle("checkedoff"),t.classList.contains("checkedoff")){this.innerText="Finished!",u(t,!0);let e=function(t){let e=f(t);if(!p(e).tasks.find((t=>!1===t.completed)))return e}(t);e&&confirm("All tasks complete!  Remove project?")&&j(e)}else this.innerText="Mark as finished",u(t,!1)}function C(t){t.addEventListener("click",w)}function w(){let t=this.closest(".project-task"),e=t.closest(".project-items");confirm("Delete this task?")&&(function(t){let e=p(f(t)),n=m(t);e.removeTask(n)}(t),e.removeChild(t))}function E(t){let o=t.querySelector(".project-items"),c=function(){let t=D("form","task-form"),o=[L(e),L(n),L(s),L(i),L(r),L(a)];for(let e of o)t.append(e);return t}();o.append(c),c.addEventListener("submit",(e=>{if(e.preventDefault(),"Cancel"===e.submitter.value)o.removeChild(c);else{let n=Object.fromEntries(new FormData(e.target).entries()),s=function(t,e){let n=p(t);return n.addTask(e),n.tasks.slice(-1)[0]}(t,n);!function(t,e){let n=function(t){let e=D("li","project-task");e.setAttribute("data-id",t.id),e.innerText=t.name;let n=function(t){let e=D("ul","project-task-details");e.classList.add("hidden");let n=g(v,y),s=g(b,C);e.append(n),e.append(s);for(let n in t)if("name"!=n&&"id"!=n&&"completed"!=n){let s=D("li","details"),i=n[0].toUpperCase().concat(n.slice(1));s.innerText=`${i}: ${t[n]}`,e.append(s)}return e}(t);return e.append(n),e.addEventListener("click",(function(t){t.stopPropagation(),function(t){let e=t.querySelector(".project-task-details");null!=e&&e.classList.toggle("hidden")}(t.target)})),e}(e);t.append(n)}(o,s),o.removeChild(c)}}))}function L(t){let e=document.createElement("input");for(let n in t)e.setAttribute(n,t[n]);return e}function D(t,e){let n=document.createElement(t);return n.classList.add(e),n}function S(t){let e=new c(t);var n;n=e,document.querySelector(".projects-list").append(function(t){let e=D("div","project");e.setAttribute("data-id",t.id);let n=function(t){let e=D("div","project-heading"),n=D("h2","project-title");n.innerText=t;let s=D("div","divider");return e.append(n),e.append(s),e}(t.name),s=D("ul","project-items"),i=T(h,E),r=T(k,j);return e.append(n),e.append(s),e.append(i),e.append(r),e}(n)),function(t){l.push(t)}(e)}document.getElementById("create-project-form").addEventListener("submit",(t=>{t.preventDefault();let e=Object.fromEntries(new FormData(t.target).entries());e.name?S(e.name):S("Unnamed Project"),t.target.reset()}))})();