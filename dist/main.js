(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var i=n.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.p;const t={type:"text",name:"name",placeholder:"Task Name"},n={type:"date",name:"due",placeholder:"Due Date"},i={type:"text",name:"description",placeholder:"Task Description"},r={type:"text",name:"priority",placeholder:"Task Priority"},a={type:"submit",value:"Add Task"},s={type:"submit",value:"Cancel"};class c{constructor(e,t){this.name=e.name,this.due=e.due,this.description=e.description,this.priority=e.priority,this.id=t}}class o{constructor(e){this.name=e,this.tasks=[],this.id=o.assignId()}addTask(e){let t=this.tasks.length+1,n=new c(e,t);this.tasks.push(n)}static assignId(){return d++}}let l=[],d=1;function p(e){l.push(e);let t=v("div","project");t.setAttribute("data-id",e.id);let n=function(e){let t=v("div","project-heading"),n=v("h2","project-title");n.innerText=e;let i=v("div","divider");return t.append(n),t.append(i),t}(e.name),i=v("ul","project-items"),r=function(){let e=v("div","add-new-task"),t=v("div","new-task-button");return t.innerText="+ add task",t.addEventListener("click",k),e.append(t),e}();return t.append(n),t.append(i),t.append(r),t}function u(e){let t=v("li","project-task");t.innerText=e.name;let n=function(e){let t=v("ul","project-task-details");t.classList.add("hidden");let n=function(){let e=v("li","details-complete");return e.classList.add("button"),e.innerText="Mark as finished",e.addEventListener("click",m),e}(),i=function(){let e=v("li","details-edit");return e.classList.add("button"),e.innerText="Edit task",e.addEventListener("click",h),e}();t.append(n),t.append(i);for(let n in e)if("name"!=n){let i=v("li","details"),r=n[0].toUpperCase().concat(n.slice(1));i.innerText=`${r}: ${e[n]}`,t.append(i)}return t}(e);return t.append(n),t.addEventListener("click",(function(e){e.stopPropagation(),f(e.target)})),t}function f(e){let t=e.querySelector(".project-task-details");null!=t&&t.classList.toggle("hidden")}function m(){let e=this.closest(".project-task");e.classList.toggle("checkedoff"),e.classList.contains("checkedoff")?this.innerText="Finished!":this.innerText="Mark as finished"}function h(){let e=this.closest(".project-task");console.log(e)}function k(){let e=this.closest(".project"),c=l.find((t=>t.id==e.getAttribute("data-id"))),o=e.querySelector(".project-items"),d=function(){let e=v("form","task-form"),c=[g(t),g(n),g(i),g(r),g(a),g(s)];for(let t of c)e.append(t);return e}();o.append(d),d.addEventListener("submit",(e=>{if("Cancel"===e.submitter.value)e.preventDefault(),o.removeChild(d);else{e.preventDefault();let t=Object.fromEntries(new FormData(e.target).entries());c.addTask(t);let n=u(t);o.append(n),o.removeChild(d)}}))}function g(e){let t=document.createElement("input");for(let n in e)t.setAttribute(n,e[n]);return t}function v(e,t){let n=document.createElement(e);return n.classList.add(t),n}let y=document.querySelector(".projects-list");document.getElementById("create-project-form").addEventListener("submit",(e=>{e.preventDefault();let t=Object.fromEntries(new FormData(e.target).entries());t.name?y.append(p(new o(t.name))):y.append(p(new o("Unnamed Project"))),e.target.reset()}));const b=document.querySelectorAll(".project-task"),j=document.querySelectorAll(".details-complete");b.forEach((function(e){e.addEventListener("click",(function(e){e.stopPropagation(),f(e.target)}))})),j.forEach((function(e){e.addEventListener("click",m)}))})();